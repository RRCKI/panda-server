DROP TABLE IF EXISTS `RESOURCE_TYPES`;

/*RESOURCE_TYPES"  IS 'Types of resources, e.g. SCORE, MCORE, SCORE_HIMEM, MCORE_HIMEM';*/;
CREATE TABLE `RESOURCE_TYPES` (
  `RESOURCE_NAME` varchar(56) NOT NULL,
  `MINCORE` SMALLINT DEFAULT NULL,
  `MAXCORE` SMALLINT DEFAULT NULL,
  `MINRAMPERCORE` SMALLINT DEFAULT NULL,
  `MAXRAMPERCORE` SMALLINT DEFAULT NULL,
  PRIMARY KEY (`RESOURCE_NAME`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

Insert into RESOURCE_TYPES (RESOURCE_NAME,MINCORE,MAXCORE,MINRAMPERCORE,MAXRAMPERCORE) values ('MCORE','2',null,null,'2000');
Insert into RESOURCE_TYPES (RESOURCE_NAME,MINCORE,MAXCORE,MINRAMPERCORE,MAXRAMPERCORE) values ('MCORE_HIMEM','2',null,'2001',null);
Insert into RESOURCE_TYPES (RESOURCE_NAME,MINCORE,MAXCORE,MINRAMPERCORE,MAXRAMPERCORE) values ('SCORE','1','1',null,'2000');
Insert into RESOURCE_TYPES (RESOURCE_NAME,MINCORE,MAXCORE,MINRAMPERCORE,MAXRAMPERCORE) values ('SCORE_HIMEM','1','1','2001',null);


DROP TABLE IF EXISTS `global_shares`;

CREATE TABLE `global_shares` (
  `NAME` varchar(32) NOT NULL,
  `VALUE` tinyint(3) NOT NULL,
  `PARENT` varchar(32) DEFAULT NULL,
  `PRODSOURCELABEL` varchar(100) DEFAULT NULL,
  `WORKINGGROUP` varchar(100) DEFAULT NULL,
  `CAMPAIGN` varchar(100) DEFAULT NULL,
  `PROCESSINGTYPE` varchar(100) DEFAULT NULL,
  `VO` varchar(32) DEFAULT NULL,
  `QUEUE_ID` smallint(5) NOT NULL,
  `THROTTLED` varchar(1) DEFAULT NULL,
  PRIMARY KEY (`NAME`),
  CONSTRAINT QUEUEID_UNIQUE UNIQUE (`QUEUE_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

/*Data for the table `global_shares` */
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('MC root','55','Production','managed','AP_(?!SOFT|REPR|UPG|THLT|VALI).*',null,null,null,'9000',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Reprocessing default','80','Reprocessing','managed','AP_REPR','(?!data15_hi)\.*',null,null,'9001',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('MC production','50','MC root','managed','AP_(?!SOFT|REPR|UPG|THLT|VALI).*','MC18.*',null,null,'9002',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('MC 16','50','MC root','managed','AP_(?!SOFT|REPR|UPG|THLT|VALI).*','MC16.*',null,null,'9003',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('MC Default','50','MC root','managed','AP_(?!SOFT|REPR|UPG|THLT|VALI).*','^(?!MC16).*',null,null,'9004',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Express','5',null,'managed',null,null,'pmgerge','atlas','9021','N');
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Analysis','20',null,'user',null,null,null,null,'9005','N');
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Production','75',null,'managed',null,null,null,null,'9006',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Test','5',null,'test.*|ptest.*|prod_test.*|rc_test.*|rcm_test.*|panda|install',null,null,null,null,'9007','N');
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Derivations','20','Production','managed','GP_PHYS',null,null,null,'9008',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Reprocessing','5','Production','managed','AP_REPR',null,null,null,'9009',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Group production','5','Production','managed','(?!GP_PHYS)\GP.*',null,null,null,'9010',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Upgrade','5','Production','managed','AP_UPG',null,null,null,'9011',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('HLT Reprocessing','5','Production','managed','AP_THLT',null,null,null,'9012','N');
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Validation','5','Production','managed','AP_VALI',null,null,null,'9013','N');
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Event Index','1','Production','managed','AP_SOFT',null,'eventIndex',null,'9014',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('MC Derivations','30','Derivations','managed','GP_PHYS','mc.*',null,null,'9015',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Data Derivations','70','Derivations','managed','GP_PHYS','data.*|valid1.*',null,null,'9016',null);
Insert into GLOBAL_SHARES (NAME,VALUE,PARENT,PRODSOURCELABEL,WORKINGGROUP,CAMPAIGN,PROCESSINGTYPE,VO,QUEUE_ID,THROTTLED) values ('Heavy Ion','20','Reprocessing','managed','AP_REPR','data15_hi.*',null,null,'9017',null);

DROP TABLE IF EXISTS `JOBS_SHARE_STATS`;

CREATE TABLE `JOBS_SHARE_STATS` (
  `TS` DATETIME NOT NULL DEFAULT '1970-01-01 00:00:00',
  `GSHARE` varchar(32) DEFAULT NULL,
  `COMPUTINGSITE` varchar(128) DEFAULT NULL,
  `JOBSTATUS` varchar(15) NOT NULL,
  `MAXPRIORITY` NUMERIC DEFAULT NULL,
  `NJOBS` NUMERIC DEFAULT NULL,
  `HS` NUMERIC DEFAULT NULL,
  `VO` varchar(16) DEFAULT NULL,
  `RESOURCE_TYPE` varchar(56) DEFAULT NULL,
  `WORKQUEUE_ID` SMALLINT DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;
